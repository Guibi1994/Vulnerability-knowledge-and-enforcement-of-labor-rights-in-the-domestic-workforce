# Reporte
library(dplyr)
library(googlesheets4)
library(stringr)


# 0. Cargar información

# 0.1. Encuestas
a0_raw_sourvey <-   read_sheet("https://docs.google.com/spreadsheets/d/12Y2I-DBsfwJPKXRQvZ730ALZKfv2OcQjI8dxisFHxqY/edit?usp=sharing") %>% 
  # Filtrar por fecha
  mutate(Timestamp = as.Date(as.character(Timestamp))) %>% 
  filter(Timestamp >= as.Date("2022-08-10"))

# 0.2. Concentimientos informados
b0_raw_consent <-
  read_sheet("https://docs.google.com/spreadsheets/d/1uc-MTzZFepJTckFBi94NJhHwPayV-C3ETlWpDMXThxk/edit?usp=sharing") %>% 
  as.data.frame()



a1_cooked <- a0_raw %>% 
  # Transformar variables-lista
  mutate(across(c(3,5,7,23,25,33,42,87,88,95,119,124,125,144),~as.character(.))) %>% 
  select(Timestamp,
         apellidos = `XX01: Primer apellido del estudiante/encuestador`,
         nombre = `XX02: Nombres del estudiante/encuestador`,
         id.estudiante = `XX03: Documento del estudiante/encuestador`,
         clase  =`XX04: Clase`,
         type = `TI01_tipo: Qué tipo de sujeto va a encuestar`)









pr <- data.frame(
  col = numeric(),
  var = character(),
  class = character())

for (i in 1:ncol(a0_raw)) {
  
  pr <- rbind(pr,
    data.frame(
      col = i,
      var = names(a0_raw)[i],
      class =
    class(a0_raw[[i]]))) %>% 
    filter(class == "list")
    
}
